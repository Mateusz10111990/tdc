  # Read more about steps on our dev center:
  # http://devcenter.wercker.com/docs/steps/index.html
  steps:
    - script:
      name: install zip
      code: |
        sudo apt-get update -y
        sudo apt-get upgrade -y
        sudo apt-get install -y zip

    # A step that executes `npm install` command
    #- npm-install

    # A custom script step, name value is used in the UI
    # and the code value contains the command that get executed
    #- script:
    #    name: Building Angular sources
    #    code: |
    #      echo "OK"
          #cd angular-src
          #npm install -g @angular/cli@latest
          #npm install
          #ng build
          #cd ..
    # A custom script step, name value is used in the UI
    # and the code value contains the command that get executed
    - script:
        name: Create ACCS zip
        code: |
          mkdir target
          zip -r target/tdc.zip config.js package.json public routes server.js manifest.json

deploy-accs:
  steps:
    - script:
        name: List directory contents
        code: |
          echo `pwd`
          echo `ls`
    # Deploy to Oracle Application Container Cloud
    - peternagy/oracle-accs-deploy@1.0.1:
        opc_user: $OPC_USERNAME
        opc_password: $OPC_PASSWORD
        rest_url: $REST_URL
        domain: $IDENTITY_DOMAIN
        application_name: tdc-demo
        application_type: node
        file: tdc.zip
        